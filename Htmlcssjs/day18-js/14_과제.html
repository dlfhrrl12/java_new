<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>컴퓨터가 숫자 0~9까지 중복되지 않는 정수 3개를 랜덤으로 출제 맞추는 게임</h1>
    <ul>
        <li>세자리의 숫자는 중복되면 안됨.(각 숫자는 자리수를 갖고 있음)</li>
        <li>각 자리수와 입력한 숫자가 일치하면 1Strike(스트라이크)</li>
        <li>숫자만 포함되어 있으면 1Ball(볼)</li>
        <li>숫자가 전혀 없으면 out(아웃)</li>
        <li>3 스트라이크면 게임종료</li>
    </ul>
    <hr>
    <button type="button" onclick="start()">게임시작</button>
    <h1 id="result"></h1>
    숫자 입력: <input type="text" id="strike">
    <button type="button" id="check">게임확인</button>
    <ol id="ol"></ol>
    <script>
        const ol = document.getElementById('ol');
        const ballSet = new Set();
        let count = 0;

        function start(){
            ballSet.clear();
            while(ballSet.size<3){
                let ball = Math.floor(Math.random()*9)+1;
                ballSet.add(ball);
            }
            console.log(ballSet);
            document.getElementById('result').innerText=`컴퓨터가 숫자를 결정했습니다.`
        }

        document.getElementById('check').addEventListener('click',()=>{
            let strike = Number(document.getElementById('strike').value);

            let strikeArr = Array.from(String(strike),Number);

            let strikes = 0;
            let balls = 0;

            if(!/^\d{3}$/.test(strike)){
                document.getElementById('result').innerText='잘못된 입력 값입니다.';
                return;
            }

            ballSet.forEach((ball)=>{
                if(strikeArr.includes(ball)){
                    if(ballSet.has(ball)){
                        strikes++;
                    }else{
                        ball++;
                    }
                }
            });
            count++;

            let result = `<li>${strikeArr.join(', ')} =>`;
            
            if(strikes==3){
                result += 'success!!</li>';
            }else if(strikes == 0 && balls == 0){
                result += 'OUT</li>';
            }else{
                result += `${strikes}Strike, ${balls}Ball</li>`;
            }

            ol.innerHTML += result;
        });
    </script>
</body>
</html>